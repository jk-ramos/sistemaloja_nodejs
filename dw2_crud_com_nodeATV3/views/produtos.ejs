<%- include ('partials/header.ejs') %>
    <%- include ('partials/navbar.ejs') %>

        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h1>Cadastrar produto</h1>
                </div>
                <div class="card-body">
                    <form action="/produtos/new" method="POST">
                        <label>Nome do produto:</label>
                        <input type="text" name="nome" placeholder="Insira o número do produto" class="form-control"
                            required>
                        <label>Valor do produto:</label>
                        <input type="text" name="valor" placeholder="Insira o valor do produto" class="form-control"
                            required>
                        <label>Categoria do produto:</label>
                        <input type="text" name="categoria" placeholder="Insira a categoria do produto" class="form-control"
                            required>
                        <br>
                        <input type="submit" value="Cadastrar" class="btn btn-success">
                    </form>
                    <hr>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h1>Produtos</h1>
                </div>
                <div class="card-body">
                    <table>
                        <thead>
                            <tr>
                                <th></th>
                                <th>Nome:</th>
                                <th>Preço:</th>
                                <th>Categoria:</th>
                                <th style="text-align: center" colspan="2">Ações:</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% produtos.forEach(produto=> { %>
                                <tr>
                                    <td><img src="imgs/product.png" width="30px"></td>
                                    <td>
                                        <%= produto.nome %>
                                    </td>
                                    <td>
                                        <%= produto.valor ? produto.valor.toLocaleString('pt-br', {style: 'currency' ,
                                            currency: 'BRL' }) : 'Preço Indisponível' %>
                                    </td>
                                    <td>
                                        <%= produto.categoria %>
                                    </td>
                                    <td><a style="color: blue;" href="/produtos/edit/<%= produto.id %>">EDITAR</a>
                                    </td>
                                    <td><a style="color: red;" href="/produtos/delete/<%= produto.id %>"
                                            onclick="return confirm('Deseja mesmo excluir o produto <%= produto.nome %>?')">EXCLUIR</a>
                                    </td>
                                </tr>
                                <% }) %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <%- include ('partials/footer.ejs') %>